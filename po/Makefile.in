MSGFMT = @MSGFMT@

prefix = @prefix@
datarootdir = @datarootdir@
localedir = @localedir@
mkdir_p = @mkdir_p@

po_files = $(wildcard *.po)
mo_files = $(subst .po,.mo, $(po_files))

all: $(mo_files)

clean:
	rm -f $(mo_files)

install:
	-$(foreach lang, $(subst .mo,, $(mo_files)), if test -d $(localedir)/$(subst -,_,$(lang))/LC_MESSAGES; then install -m 644 $(lang).mo $(localedir)/$(subst -,_,$(lang))/LC_MESSAGES/abiword.mo; fi; )

uninstall:
	-$(foreach lang, $(subst .mo,, $(mo_files)), file=$(localedir)/$(subst -,_,$(lang))/LC_MESSAGES/abiword.mo; if test -f $$file; then rm -f $$file; fi; )

update-po:
	-$(foreach file, $(po_files), msgmerge -UN --backup=none $(file) abiword.POT; )

%.mo: %.po
	-$(MSGFMT) -o $@ $<
