
SUBDIRS = data itex2mml xp

plugindir = $(ABIWORD_PLUGINSDIR)
plugin_LTLIBRARIES = mathview.la

mathview_la_LIBADD = \
	itex2mml/libitex2mml.la \
	xp/libxp.la

mathview_la_LDFLAGS = \
	$(MATHVIEW_LIBS) \
	-avoid-version \
	-module \
	-no-undefined

nodist_EXTRA_mathview_la_SOURCES = dummy.cpp
mathview_la_SOURCES = 

EXTRA_DIST = \
	plugin.m4

if TOOLKIT_WIN

plugin_DATA = \
	mathview.dll

CLEANFILES = \
	mathview.def \
	mathview.dll \
	mathview.dll.a

.libs/mathview.a: mathview.la

mathview.dll: .libs/mathview.a
	$(CXX) -shared $^ -o $@ -Wl,--enable-auto-import -Wl,--out-implib,$@.a $(MATHVIEW_LIBS)

endif # TOOLKIT_WIN

